var start=new Date().getTime();var original_onload=null;var original_onerror=null;var original_onbeforeunload=null;var tracker=null;var host=null;if(window.onerror!=null){original_onerror=window.onerror}if(window.onload!=null){original_onload=window.onload}if(window.onbeforeunload!=null){original_onbeforeunload=window.onbeforeunload}send_data=function(a,b){var c=encodeURIComponent;b.host=c(window.location.href);pars="";for(k in b){pars=pars+"&"+k+"="+c(b[k])}(new Image()).src=host+tracker+"/?t="+c(a)+pars};collect_onbeforeunload_time=function(){now=new Date().getTime();d=new Array();d.beforeunloadtime=now;d.start=start;d.total_elapsed_time=now-start;try{if(performance!=null){n=performance.navigation;switch(n.type){case n.TYPE_RELOAD:d.type_navigate="reload";break;case n.TYPE_BACK_FORWARD:d.type_navigate="back_forward";break;default:case n.TYPE_NAVIGATE:d.type_navigate="navigate";break}send_data("u",d)}}catch(a){}if(original_onbeforeunload!=null){original_onbeforeunload()}};collect_performance_data=function(){var j;try{if(performance!=null){var f=performance.timing;var l=performance.navigation;if(f.loadEventEnd>0){var h=f.loadEventEnd-f.navigationStart;var a=f.connectEnd-f.connectStart;var b=f.domainLookupEnd-f.domainLookupStart;var c=f.loadEventEnd-f.domLoading;var j=new Array();if(l.type==l.TYPE_NAVIGATE||l.type==l.TYPE_RELOAD){j.page_load_time=h;j.tcp_time=a;j.dns_time=b;j.processing_time=c}}}else{now=new Date().getTime();var c=now-start;j.processing_time=c}send_data("p",j)}catch(g){}if(original_onload!=null){original_onload()}};collect_errors=function(c,b,a){d={msg:c,url:b,line:a};send_data("e",d);if(original_onerror!=null){original_onerror(c,b,a)}};lazy_collect=function(){setTimeout(function(){collect_performance_data()},0)};gather_geo_info=function(){try{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(b){send_data("g",{lat:b.coords.latitude,"long":b.coords.longitude})},function(b){});i}}catch(a){}};activate=function(a,b){host=a;tracker=b;geo=false;window.onload=lazy_collect;window.onerror=collect_errors;window.onbeforeunload=collect_onbeforeunload_time;if(geo==true){gather_geo_info()}};